{"version":3,"sources":["cccMetaGenerator/makeUrlMap.ts","components/common/DocumentTitle.tsx","components/LoadingPlaceholder/LoadingPlaceholder.tsx","components/common/hooks/useScrollToTopOnRouteChange.ts","components/PageBreadcrumbs/PageBreadcrumbs.tsx","components/HighlightWrapper/HighlightWrapper.tsx","components/Page/PageParagraph.tsx","components/Page/PageFootnotes.tsx","utils/reactRouterUtils.ts","components/Page/PageControls.tsx","components/Page/Page.tsx","components/CCCReference/CCCReference.tsx","cccMetaGenerator/makeRefRangeTree.ts","components/Search/createSearchIndexHelpers.ts","components/Search/createPageNodes.ts","components/Search/createSearchIndex.ts","components/Home/Home.tsx","components/Footer/github.svg","components/Page/pageHooks.ts","components/Index/Index.tsx","components/Search/Search.tsx","components/Search/useSearchIndexHook.ts","components/common/featureFlags.ts","components/Search/SearchResultCard.tsx","components/Search/SearchResults.tsx","components/common/config.ts","components/Footer/Footer.tsx","components/Layout/Layout.tsx","components/App.tsx","serviceWorker.ts","index.tsx","components/Page/pageScrollHooks.ts"],"names":["makeUrlToTocMap","tocIdToUrlMap","Object","entries","reduce","acc","_ref","tocId","url","urlWithoutShortLink","stripUrlShortLink","_objectSpread","[object Object]","SHORT_LINK_PATTERN","replace","__webpack_require__","d","__webpack_exports__","DocumentTitle","react__WEBPACK_IMPORTED_MODULE_0__","react__WEBPACK_IMPORTED_MODULE_0___default","n","react_helmet__WEBPACK_IMPORTED_MODULE_1__","title","React","createElement","Helmet","LoadingPlaceholder","LoadingPlaceholderMaximized","_material_ui_core__WEBPACK_IMPORTED_MODULE_1__","components_common_config__WEBPACK_IMPORTED_MODULE_2__","cccIconPath","concat","PUBLIC_FOLDER_URL","props","showImmediately","styles","useStlyes","showIcon","setShowIcon","useState","timer","setTimer","undefined","useEffect","newTimer","setTimeout","clearTimeout","className","cccIconContainer","cccIconPlaceholder","src","height","width","alt","makeStyles","@keyframes cccIconAnimation","0%","backgroundColor","50%","100%","maskImage","maskRepeat","animationName","animationDuration","animationIterationCount","animationTimingFunction","maskSize","maskPosition","opacity","useMaximizedStyles","loadingContainer","display","justifyContent","useScrollToTopOnPathChange","path","window","scrollTo","useStyles","container","padding","paddingBottom","breadcrumbs","fontFamily","PageBreadcrumbs","store","currentPageId","extraMeta","breadcrumbsMap","pageMetaMap","toc_nodes","tocNodes","breadcrumbTrail","findPageBreadcrumbTrail","map","getTocNode","lastIndex","length","Breadcrumbs","createHomeBreadcrumb","createBreadcrumbLink","currentTocId","current","parent","Link","to","APP_ROUTES","INDEX","IconButton","size","Book","tocNode","index","text","id","breadcrumbText","createBreadcrumbText","isLastIndex","createShortenedBreadcrumbText","pageMeta","key","textsToReplace","shortenedText","currText","args","toLowerCase","numberInText","getNumberInText","FIRST_NUMBER_PATTERN","matches","match","HighlightWrapper","children","refMeta","emptyRefMeta","highlighted","ref","classnames","wrapper","transitionProperty","transitionDuration","createRef","PageParagraph","paragraph","wrapperRefMeta","elements","attrs","paragraphIndented","indent","renderParagraphElement","element","type","sup","number","WithElementStyles","href","link","cccReferenceStyle","ref_number","BoldHOC","ItalicHOC","b","Fragment","i","lineHeight","margin","marginTop","marginLeft","marginRight","borderLeft","paddingLeft","fontSize","PageFootnotes","footnotes","wrapperRefMetas","footnoteKeys","keys","pageFootnotesContainer","pageFootnoteLabel","footnote","getFootnoteRefKey","PageFootnote","refs","footnoteNumberElement","footnoteRefStyle","pageFootnote","renderFootnoteRefs","curr","shouldAddComma","renderedRef","commaElement","fontWeight","color","historyPush","history","push","PageControls","cccStore","next","prev","hasNext","hasUrl","hasPrev","pageControls","pageControlButton","pageLeftButton","onClick","getUrl","KeyboardArrowLeft","pageRightButton","KeyboardArrowRight","paddingTop","border","PAGE_TOC_ID_MATCH","Page","EnhancedPage","location","pageNode","shortUrl","getShortUrl","getPageTocId","elementRefs","usePageScrollHooks","search","paragraphs","setDocumentTitle","pageContainer","getParagraphRefKey","isLoading","useLoadPageContentHook","Layout","routeHistory","documentTitle","makeDocumentTitle","showLoading","assign","ccc","fullUrl","params","urlMap","CCC_REFERENCE_MATCH","CCCReference","cccReferenceMatch","isNumber","cccReferenceNumber","parseInt","matchedPageId","findPage","cccRefNumber","rootRangeNode","currentNode","left","right","isInLeft","max","isInRight","min","cccRefRangeTree","root","targetPageUrl","getCCCRefKey","v","isNaN","createPageSnapshot","pageNodes","pageTitle","content","extractTextFromPage","page","paragraphText","extractTextFromPageParagraphs","footnotesText","extractTextFromPageFootnotes","pageParagraphs","mapper","PARAGRAPH_ELEMENT_TEXT_MAPPER","join","pageFootnotes","values","footnoteText","e","ref-anchor","ref-ccc","spacer","loadPageContent","async","request","uri","method","json","createSearchIndexes","reverseUrlMap","shortUrls","k","Promise","all","createPageNodesFromRemote","cccSnapshot","makeConciseCCCSnapshot","pageSnapshots","titleIndex","lunr","this","field","forEach","entry","rest","_objectWithoutProperties","_excluded","add","contentIndex","_excluded2","searchByTitle","createSearchHandler","searchByContent","ready","term","searchResult","createEmptyIndexes","createEmptyLunrIndex","Home","components_App__WEBPACK_IMPORTED_MODULE_0__","module","exports","p","setImmediate","request_promise_native__WEBPACK_IMPORTED_MODULE_1__","request_promise_native__WEBPACK_IMPORTED_MODULE_1___default","lastShortUrl","setShortUrl","setPageNode","urlHasChanged","data","url1","url2","onDataLoad","Index","react_router_dom__WEBPACK_IMPORTED_MODULE_1__","_Layout_Layout__WEBPACK_IMPORTED_MODULE_2__","_material_ui_core__WEBPACK_IMPORTED_MODULE_3__","components_common_hooks_useScrollToTopOnRouteChange__WEBPACK_IMPORTED_MODULE_4__","ul","& ul","& li:last-child","marginBottom","toc_link_tree","renderIndex","tocTree","renderIndexNode","tocLink","renderedChildren","renderedText","Search","components_Layout_Layout__WEBPACK_IMPORTED_MODULE_1__","_material_ui_core__WEBPACK_IMPORTED_MODULE_2__","_material_ui_icons__WEBPACK_IMPORTED_MODULE_4__","_useSearchIndexHook__WEBPACK_IMPORTED_MODULE_5__","_SearchResults__WEBPACK_IMPORTED_MODULE_6__","searchIndex","useSearchIndexHook","searchTerm","setSearchTerm","doSearch","setDoSearch","setSearchResult","emptySearchResult","searchMatches","getMatchingPages","TextField","label","value","disabled","autoFocus","onChange","evt","target","SearchIcon","SearchResults","indexSearchTerm","byTitle","byContent","_createSearchIndex__WEBPACK_IMPORTED_MODULE_0__","react__WEBPACK_IMPORTED_MODULE_1__","ramda__WEBPACK_IMPORTED_MODULE_2__","setSearchIndex","hasLoaded","setHasLoaded","newIndex","createSearchIndex","once","FLAG_ENABLE_SEARCH_PAGE","process","REACT_APP_FLAG_ENABLE_SEARCH_PAGE","SearchResultCard","Grid","item","xs","sm","md","Paper","paper","withWrapperContainer","searchResultsWrapper","searchResultsLabel","isEmptySearchTerm","labelDiv","hasNoMatchingResults","combinedEntries","spacing","result","minHeight","Footer","footerContainer","Container","maxWidth","GITHUB_ICON","backgroundStyle","loadingPlaceholderContainer","appBar","alignItems","catechismAppBarText","textDecoration","mainContainerWidth","toolbarContainerWidth","DEFAULT_WEBSITE_TITLE","HideOnScroll","AppBar","style","boxShadow","Toolbar","DEFAULT_TOOLBAR_WIDTH","DummyToolbar","DEFAULT_MAIN_CONTAINER_WIDTH","trigger","useScrollTrigger","Slide","appear","direction","in","suffix","App","react_router_dom__WEBPACK_IMPORTED_MODULE_2__","_Home_Home__WEBPACK_IMPORTED_MODULE_3__","_Page_Page__WEBPACK_IMPORTED_MODULE_4__","_Index_Index__WEBPACK_IMPORTED_MODULE_5__","_CCCReference_CCCReference__WEBPACK_IMPORTED_MODULE_6__","_Search_Search__WEBPACK_IMPORTED_MODULE_7__","request_promise_native__WEBPACK_IMPORTED_MODULE_8__","request_promise_native__WEBPACK_IMPORTED_MODULE_8___default","components_common_featureFlags__WEBPACK_IMPORTED_MODULE_9__","components_common_config__WEBPACK_IMPORTED_MODULE_10__","_LoadingPlaceholder_LoadingPlaceholder__WEBPACK_IMPORTED_MODULE_11__","HOME","PAGE","CCC_REFERENCE","SEARCH","isLoaded","useCCCStoreHook","withStore","withStoreEnhancer","HashRouter","Route","exact","component","Component","setStore","loadRemoteStores","cccMeta","isLocalhost","Boolean","hostname","registerValidSW","swUrl","config","navigator","serviceWorker","register","then","registration","onupdatefound","installingWorker","installing","onstatechange","state","controller","console","log","onUpdate","onSuccess","catch","error","ReactDOM","render","document","getElementById","URL","origin","addEventListener","fetch","response","contentType","headers","get","status","indexOf","unregister","reload","checkValidServiceWorker","locationSearch","pageFilled","paragraphKeys","_","cccRefToParagraphMapper","createCCCRefToParagraphMapper","shouldUpdate","setShouldUpdate","lastFocusedElement","setLastFocusedElement","focusedElement","setFocusedElement","makeUpdatedElementRefs","useCallback","makeItemRefs","setElementRefs","newFocusedElement","getCurrentFocusedElement","resolvedElementKey","resolveFocusedElementKey","focusedElementMeta","scrollToElement","makeResettedElementRefs","focusedElementKey","resolvedKey","currentKey","keyToReset","updatedElementRef","cccRefs","filter","cccRef","footnoteNumber","refNumber","currentFocusedElement","queryString","parse","elementMeta","offsetTop","SCROLL_TO_ELEMENT_OFFSET"],"mappings":"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","file":"static/js/main.61127944.chunk.js","sourcesContent":["import { TocIdToUrlMap } from 'makeStaticAssets/typedefs'\n\nexport interface UrlToTocIdMap {\n  [url: string]: string\n}\n\nexport const makeUrlToTocMap = (\n  tocIdToUrlMap: TocIdToUrlMap\n): UrlToTocIdMap => {\n  return Object.entries(tocIdToUrlMap).reduce((acc, [tocId, url]) => {\n    const urlWithoutShortLink = stripUrlShortLink(url)\n    return { ...acc, [urlWithoutShortLink]: tocId }\n  }, {})\n}\n\nconst SHORT_LINK_PATTERN = /\\+.*$/\nexport const stripUrlShortLink = (url: string) =>\n  url.replace(SHORT_LINK_PATTERN, '')\n","import React from 'react'\nimport { Helmet } from 'react-helmet'\n\ninterface DocumentTitleProps {\n  title: string\n}\n\nexport const DocumentTitle: React.FC<DocumentTitleProps> = ({ title }) => {\n  return (\n    <Helmet>\n      <title>{title}</title>\n    </Helmet>\n  )\n}\n","import React, { useEffect, useState } from 'react'\nimport { makeStyles } from '@material-ui/core'\nimport { PUBLIC_FOLDER_URL } from 'components/common/config'\n\nconst cccIconPath = `${PUBLIC_FOLDER_URL}/ccc.svg`\nconst DEFAULT_ICON_SHOW_TIMEOUT = 1000\n\ninterface LoadingPlaceholderProps {\n  showImmediately?: boolean\n}\n\nexport const LoadingPlaceholder: React.FC<LoadingPlaceholderProps> = props => {\n  const { showImmediately = false } = props\n  const styles = useStlyes()\n\n  const [showIcon, setShowIcon] = useState(showImmediately)\n  const [timer, setTimer] = useState<NodeJS.Timer | undefined>(undefined)\n\n  useEffect(() => {\n    if (!showImmediately && !timer) {\n      const newTimer = setTimeout(() => {\n        setShowIcon(true)\n      }, DEFAULT_ICON_SHOW_TIMEOUT)\n      setTimer(newTimer)\n    }\n\n    return () => {\n      timer && clearTimeout(timer)\n    }\n  }, [showImmediately, timer])\n\n  if (!showIcon) {\n    return null\n  }\n\n  return (\n    <div className={styles.cccIconContainer}>\n      <div className={styles.cccIconPlaceholder}>\n        <img\n          src={cccIconPath}\n          height='300px'\n          width='auto'\n          alt='Catechism Icon'\n        />\n      </div>\n    </div>\n  )\n}\n\nconst useStlyes = makeStyles({\n  '@keyframes cccIconAnimation': {\n    '0%': { backgroundColor: 'rgb(215,202,47)' },\n    '50%': { backgroundColor: 'rgb(255,245,129)' },\n    '100%': { backgroundColor: 'rgb(215,202,47)' },\n  },\n  cccIconContainer: {\n    backgroundColor: 'rgb(215,202,47)',\n    maskImage: `url(${cccIconPath})`,\n    maskRepeat: 'no-repeat',\n    animationName: '$cccIconAnimation',\n    animationDuration: '0.75s',\n    animationIterationCount: 'infinite',\n    animationTimingFunction: 'ease-in-out',\n    maskSize: 'contain',\n    maskPosition: 'center',\n  },\n  cccIconPlaceholder: {\n    opacity: 0,\n  },\n})\n\nexport const LoadingPlaceholderMaximized: React.FC<\n  LoadingPlaceholderProps\n> = props => {\n  const styles = useMaximizedStyles()\n  return (\n    <div className={styles.loadingContainer}>\n      <LoadingPlaceholder {...props} />\n    </div>\n  )\n}\n\nconst useMaximizedStyles = makeStyles({\n  loadingContainer: {\n    height: '100vh',\n    width: '100vw',\n    display: 'flex',\n    backgroundColor: 'white',\n    justifyContent: 'center',\n  },\n})\n","import { useEffect } from 'react'\n\nexport const useScrollToTopOnPathChange = (path: string) =>\n  useEffect(() => {\n    window.scrollTo(0, 0)\n  }, [path])\n","import React from 'react'\nimport { CCCEnhancedStore } from 'makeStaticAssets/typedefs'\nimport { Breadcrumbs, makeStyles, IconButton } from '@material-ui/core'\nimport { BreadcrumbsMap } from 'cccMetaGenerator/makeBreadcrumbs'\nimport { TOCNode, TOCNodes } from 'store/cccTypedefs'\nimport { Book } from '@material-ui/icons'\nimport { Link } from 'react-router-dom'\nimport { PageMetaMap } from 'cccMetaGenerator/makePageMetaMap'\nimport { APP_ROUTES } from 'components/App'\n\nconst useStyles = makeStyles({\n  container: {\n    padding: '20px 10px',\n    paddingBottom: 10,\n  },\n  breadcrumbs: {\n    fontFamily: 'inherit',\n  },\n})\n\ninterface PageBreadcrumbsProps {\n  store: CCCEnhancedStore\n  currentPageId: string\n}\n\nexport const PageBreadcrumbs: React.FC<PageBreadcrumbsProps> = props => {\n  const { store, currentPageId } = props\n  const {\n    extraMeta: { breadcrumbsMap, pageMetaMap },\n    store: { toc_nodes: tocNodes },\n  } = store\n  const styles = useStyles()\n\n  const breadcrumbTrail = findPageBreadcrumbTrail(\n    currentPageId,\n    breadcrumbsMap\n  ).map(getTocNode(tocNodes))\n  const lastIndex = breadcrumbTrail.length - 1\n\n  return (\n    <div className={styles.container}>\n      <Breadcrumbs className={styles.breadcrumbs}>\n        {createHomeBreadcrumb()}\n        {breadcrumbTrail.map(createBreadcrumbLink(pageMetaMap, lastIndex))}\n      </Breadcrumbs>\n    </div>\n  )\n}\n\nconst findPageBreadcrumbTrail = (\n  currentTocId: string,\n  breadcrumbsMap: BreadcrumbsMap\n): string[] => {\n  const current = breadcrumbsMap[currentTocId]\n\n  if (current.parent === '') {\n    return [currentTocId]\n  }\n\n  return [\n    ...findPageBreadcrumbTrail(current.parent, breadcrumbsMap),\n    currentTocId,\n  ]\n}\n\nconst createBreadcrumbText = (text: string, isLastIndex: boolean): string => {\n  if (isLastIndex) {\n    return text\n  }\n\n  return createShortenedBreadcrumbText(text)\n}\n\nconst createHomeBreadcrumb = () => {\n  return (\n    <Link to={APP_ROUTES.INDEX}>\n      <IconButton size='small'>\n        <Book />\n      </IconButton>\n    </Link>\n  )\n}\n\nconst createBreadcrumbLink = (pageMetaMap: PageMetaMap, lastIndex: number) =>\n  function BreadcrumbLink(tocNode: TOCNode, index: number) {\n    const { text, id } = tocNode\n    const isLastIndex = index === lastIndex\n    const breadcrumbText = createBreadcrumbText(text, isLastIndex)\n    const pageMeta = pageMetaMap[id]\n\n    if (!pageMeta) {\n      return <div key={index}>{breadcrumbText}</div>\n    }\n\n    return (\n      <Link to={`/p/${pageMeta.url}`} key={index}>\n        {breadcrumbText}\n      </Link>\n    )\n  }\n\nconst getTocNode = (tocNodes: TOCNodes) => (tocId: string): TOCNode =>\n  tocNodes[tocId]\n\nconst textsToReplace = [\n  [' one', '1'],\n  [' two', '2'],\n  [' three', '3'],\n  [' four', '4'],\n  [' five', '5'],\n  ['i.', '1'],\n  ['ii.', '2'],\n  ['iii.', '3'],\n  ['iv.', '4'],\n  ['v.', '5'],\n  ['vi.', '6'],\n  ['vii.', '7'],\n  ['viii.', '8'],\n  ['ix.', '9'],\n  ['x.', '10'],\n  ['xi.', '11'],\n]\n\nconst createShortenedBreadcrumbText = (text: string) => {\n  const shortenedText = textsToReplace.reduce(\n    (currText, args) => currText.replace(args[0], args[1]),\n    text.toLowerCase()\n  )\n\n  const numberInText = getNumberInText(shortenedText)\n  if (!numberInText) {\n    return text\n  }\n\n  return `${numberInText}.`\n}\n\nconst FIRST_NUMBER_PATTERN = /\\d/\nconst getNumberInText = (text: string) => {\n  const matches = text.match(FIRST_NUMBER_PATTERN)\n  if (!matches) {\n    return ''\n  }\n\n  return matches[0]\n}\n","import React, { createRef } from 'react'\nimport { makeStyles } from '@material-ui/styles'\nimport classnames from 'classnames'\nimport { WrapperRefMeta } from 'components/Page/pageScrollHooks'\n\ninterface HighlightWrapperProps {\n  refMeta?: WrapperRefMeta\n}\n\nexport const HighlightWrapper: React.FC<HighlightWrapperProps> = props => {\n  const { children, refMeta = emptyRefMeta } = props\n  const { highlighted, ref } = refMeta\n  const styles = useStyles()\n\n  return (\n    <div\n      className={classnames(styles.wrapper, {\n        [styles.highlighted]: highlighted,\n      })}\n      ref={ref}\n    >\n      {children}\n    </div>\n  )\n}\n\nconst useStyles = makeStyles({\n  wrapper: {\n    backgroundColor: '#24730000',\n    transitionProperty: 'background-color',\n    transitionDuration: '6s',\n  },\n  highlighted: {\n    backgroundColor: '#247300cc',\n    transitionDuration: '0s',\n  },\n})\n\nconst emptyRefMeta: WrapperRefMeta = {\n  highlighted: false,\n  ref: createRef(),\n}\n","import React from 'react'\nimport classnames from 'classnames'\nimport { makeStyles } from '@material-ui/styles'\nimport { WrapperRefMeta } from './pageScrollHooks'\nimport { HighlightWrapper } from 'components/HighlightWrapper/HighlightWrapper'\nimport {\n  LeanPageParagraph,\n  LeanPageParagraphElement,\n  LeanTextElement,\n  LeanAnchorElement,\n} from 'makeStaticAssets/typedefs'\nimport { PageElementAttributes } from 'store/cccTypedefs'\n\ninterface PageParagraphProps {\n  paragraph: LeanPageParagraph\n  wrapperRefMeta: WrapperRefMeta\n}\n\nexport const PageParagraph: React.FC<PageParagraphProps> = props => {\n  const styles = useStyles()\n\n  const { paragraph, wrapperRefMeta } = props\n  const { elements, attrs = {} } = paragraph\n  return (\n    <HighlightWrapper refMeta={wrapperRefMeta}>\n      <p\n        className={classnames(styles.paragraph, {\n          [styles.paragraphIndented]: !!attrs.indent,\n        })}\n      >\n        {elements.map(renderParagraphElement(styles))}\n      </p>\n    </HighlightWrapper>\n  )\n}\n\nconst renderParagraphElement = (styles: Record<string, string>) => (\n  element: LeanPageParagraphElement,\n  index: number\n) => {\n  switch (element.type) {\n    case 'spacer':\n      return <br key={index} />\n    case 'ref':\n      return (\n        <sup key={index} className={styles.sup}>\n          {element.number}\n        </sup>\n      )\n    case 'ref-anchor':\n      return (\n        <WithElementStyles element={element} key={index}>\n          <a href={element.link}>â‡’</a>\n        </WithElementStyles>\n      )\n    case 'ref-ccc':\n      return (\n        <span key={index} className={styles.cccReferenceStyle}>\n          {element.ref_number}{' '}\n        </span>\n      )\n    case 'text':\n      return (\n        <WithElementStyles element={element} key={index}>\n          {element.text}\n        </WithElementStyles>\n      )\n    default:\n      return ''\n  }\n}\n\ninterface WithElementStylesProps {\n  element: LeanTextElement | LeanAnchorElement\n}\nconst WithElementStyles: React.FC<WithElementStylesProps> = props => {\n  const { children, element } = props\n  const { attrs } = element\n\n  return (\n    <span>\n      <BoldHOC attrs={attrs}>\n        <ItalicHOC attrs={attrs}>{children}</ItalicHOC>\n      </BoldHOC>\n    </span>\n  )\n}\n\ninterface StyleHOCProps {\n  attrs?: PageElementAttributes\n}\n\nconst BoldHOC: React.FC<StyleHOCProps> = props => {\n  const { attrs = {}, children } = props\n  return attrs.b ? <b>{children}</b> : <>{children}</>\n}\nconst ItalicHOC: React.FC<StyleHOCProps> = props => {\n  const { attrs = {}, children } = props\n  return attrs.i ? <i>{children}</i> : <>{children}</>\n}\n\nconst useStyles = makeStyles({\n  paragraph: {\n    lineHeight: '1.5em',\n    margin: 0,\n    marginTop: '1em',\n    padding: '0 5px',\n  },\n  paragraphIndented: {\n    marginLeft: '2em',\n    marginRight: '2em',\n  },\n  cccReferenceStyle: {\n    borderLeft: '3px solid #b5b129',\n    marginLeft: -13,\n    paddingLeft: 10,\n  },\n  sup: {\n    fontSize: '0.75em',\n    lineHeight: 0,\n  },\n})\n","import React from 'react'\nimport {\n  PageFootnotes as PageFootnotesType,\n  PageFootnote as PageFootnoteType,\n  PageFootnoteRef,\n} from '../../store/cccTypedefs'\nimport { makeStyles } from '@material-ui/styles'\nimport { RefsMap, WrapperRefMeta, getFootnoteRefKey } from './pageScrollHooks'\nimport { HighlightWrapper } from 'components/HighlightWrapper/HighlightWrapper'\n\ninterface PageFoonotesProps {\n  footnotes: PageFootnotesType\n  wrapperRefMetas: RefsMap\n}\n\nexport const PageFootnotes: React.FC<PageFoonotesProps> = props => {\n  const { footnotes, wrapperRefMetas } = props\n  const styles = useStyles()\n\n  // TODO sort ascending\n  const footnoteKeys = Object.keys(footnotes)\n\n  const hasFootnotes = footnoteKeys.length > 0\n  if (!hasFootnotes) {\n    return null\n  }\n\n  return (\n    <div className={styles.pageFootnotesContainer}>\n      <h2 className={styles.pageFootnoteLabel}>Footnotes</h2>\n      {footnoteKeys.map((key, index) => {\n        const footnote = footnotes[key]\n        const wrapperRefMeta = wrapperRefMetas[getFootnoteRefKey(key)]\n\n        return (\n          <PageFootnote\n            footnote={footnote}\n            wrapperRefMeta={wrapperRefMeta}\n            key={index}\n          />\n        )\n      })}\n    </div>\n  )\n}\n\ninterface PageFootnoteProps {\n  footnote: PageFootnoteType\n  wrapperRefMeta: WrapperRefMeta\n}\nconst PageFootnote: React.FC<PageFootnoteProps> = props => {\n  const styles = useStyles()\n  const { footnote, wrapperRefMeta } = props\n  const { refs, number } = footnote\n\n  const footnoteNumberElement = (\n    <span key={-1} className={styles.footnoteRefStyle}>{`${number}. `}</span>\n  )\n\n  return (\n    <HighlightWrapper refMeta={wrapperRefMeta}>\n      <p className={styles.pageFootnote}>\n        {refs.reduce(renderFootnoteRefs, [footnoteNumberElement])}\n      </p>\n    </HighlightWrapper>\n  )\n}\n\nconst renderFootnoteRefs = (\n  acc: JSX.Element[],\n  curr: PageFootnoteRef,\n  index: number\n) => {\n  const shouldAddComma = index > 0\n  const renderedRef = <span key={index}>{curr.text}</span>\n\n  if (shouldAddComma) {\n    const commaElement = <span key={`${index}-comma`}>,</span>\n    return [...acc, commaElement, renderedRef]\n  }\n  return [...acc, renderedRef]\n}\n\nconst useStyles = makeStyles({\n  pageFootnotesContainer: {\n    marginTop: '2em',\n  },\n  pageFootnote: {\n    fontSize: '0.75em',\n    padding: 5,\n    margin: '5px 0',\n  },\n  pageFootnoteLabel: {\n    margin: 0,\n    fontWeight: 'normal',\n    color: 'gray',\n  },\n  footnoteRefStyle: {\n    borderLeft: '3px solid #247300',\n    marginLeft: -13,\n    paddingLeft: 10,\n  },\n})\n","import * as H from 'history'\n\nexport const historyPush = (history: H.History, url: string) =>\n  // eslint-disable-next-line fp/no-mutating-methods\n  history.push(url)\n","import React from 'react'\nimport { PageMetaMap } from '../../cccMetaGenerator/makePageMetaMap'\nimport { CCCEnhancedStore } from 'makeStaticAssets/typedefs'\nimport { IconButton, makeStyles } from '@material-ui/core'\nimport { KeyboardArrowLeft, KeyboardArrowRight } from '@material-ui/icons'\nimport { historyPush } from '../../utils/reactRouterUtils'\nimport * as H from 'history'\n\ninterface PageControlsProps {\n  tocId: string\n  cccStore: CCCEnhancedStore\n  history: H.History\n}\n\nexport const PageControls: React.FC<PageControlsProps> = props => {\n  const styles = useStyles()\n  const { cccStore, history, tocId } = props\n\n  const { pageMetaMap } = cccStore.extraMeta\n  const { next, prev } = pageMetaMap[tocId]\n\n  const hasNext = hasUrl(next, pageMetaMap)\n  const hasPrev = hasUrl(prev, pageMetaMap)\n\n  return (\n    <div className={styles.pageControls}>\n      {hasPrev && (\n        <IconButton\n          className={`${styles.pageControlButton} ${styles.pageLeftButton}`}\n          onClick={() =>\n            historyPush(history, `/p/${getUrl(prev, pageMetaMap)}`)\n          }\n        >\n          <KeyboardArrowLeft fontSize='large' />\n        </IconButton>\n      )}\n      {hasNext && (\n        <IconButton\n          className={`${styles.pageControlButton} ${styles.pageRightButton}`}\n          onClick={() =>\n            historyPush(history, `/p/${getUrl(next, pageMetaMap)}`)\n          }\n        >\n          <KeyboardArrowRight fontSize='large' />\n        </IconButton>\n      )}\n    </div>\n  )\n}\n\nconst hasUrl = (tocId: string, pageMetaMap: PageMetaMap) => tocId in pageMetaMap\nconst getUrl = (tocId: string, pageMetaMap: PageMetaMap) =>\n  pageMetaMap[tocId].url\n\nconst useStyles = makeStyles({\n  pageControls: { display: 'flex', paddingTop: '2em', paddingBottom: '1em' },\n  pageLeftButton: {},\n  pageRightButton: { marginLeft: 'auto' },\n  pageControlButton: {\n    border: '1px solid rgba(0, 0, 0, 0.08)',\n  },\n})\n","import React from 'react'\nimport { stripUrlShortLink } from 'cccMetaGenerator/makeUrlMap'\nimport { CCCEnhancedStore, LeanPageNode } from 'makeStaticAssets/typedefs'\nimport { Layout, makeDocumentTitle } from 'components/Layout/Layout'\nimport { makeStyles } from '@material-ui/styles'\nimport { PageBreadcrumbs } from '../PageBreadcrumbs/PageBreadcrumbs'\nimport { AppRouteType } from 'components/App'\nimport { useScrollToTopOnPathChange } from '../common/hooks/useScrollToTopOnRouteChange'\nimport { PageParagraph } from './PageParagraph'\nimport { PageFootnotes } from './PageFootnotes'\nimport { PageControls } from './PageControls'\nimport { usePageScrollHooks, getParagraphRefKey } from './pageScrollHooks'\nimport { useLoadPageContentHook } from './pageHooks'\nimport { DocumentTitle } from 'components/common/DocumentTitle'\n\nexport const PAGE_TOC_ID_MATCH = 'PAGE_TOC_ID'\n\ninterface PageRouteParams {\n  [PAGE_TOC_ID_MATCH]: string\n}\n\ninterface EnhancedPageProps extends PageProps {\n  pageNode: LeanPageNode\n}\n\nexport const EnhancedPage: React.FC<EnhancedPageProps> = props => {\n  const { cccStore, location, pageNode } = props\n  const styles = useStyles()\n\n  const shortUrl = getShortUrl(props)\n  const tocId = getPageTocId(cccStore, shortUrl)\n\n  useScrollToTopOnPathChange(tocId)\n\n  const elementRefs = usePageScrollHooks(pageNode, location.search)\n\n  const { paragraphs, footnotes } = pageNode\n\n  return (\n    <>\n      {setDocumentTitle(cccStore, tocId)}\n      <PageBreadcrumbs store={cccStore} currentPageId={tocId} />\n      <div className={styles.pageContainer}>\n        {paragraphs.map((paragraph, index) => {\n          const wrapperRefMeta = elementRefs[getParagraphRefKey(index)]\n\n          return (\n            <PageParagraph\n              paragraph={paragraph}\n              key={index}\n              wrapperRefMeta={wrapperRefMeta}\n            />\n          )\n        })}\n        <PageFootnotes footnotes={footnotes} wrapperRefMetas={elementRefs} />\n      </div>\n      <PageControls cccStore={cccStore} history={props.history} tocId={tocId} />\n    </>\n  )\n}\n\n// eslint-disable-next-line @typescript-eslint/no-empty-interface\ninterface PageProps extends AppRouteType<PageRouteParams> {}\n\nexport const Page: React.FC<PageProps> = props => {\n  const shortUrl = getShortUrl(props)\n  const { pageNode, isLoading } = useLoadPageContentHook(shortUrl)\n\n  return (\n    <Layout\n      routeHistory={props.history}\n      documentTitle={makeDocumentTitle('...')}\n      showLoading={isLoading}\n    >\n      <EnhancedPage {...props} pageNode={pageNode as LeanPageNode} />\n    </Layout>\n  )\n}\n\nconst setDocumentTitle = (ccc: CCCEnhancedStore, tocId: string) => {\n  const { text } = ccc.store.toc_nodes[tocId]\n  return <DocumentTitle title={makeDocumentTitle(text)} />\n}\n\nexport const getShortUrl = (props: PageProps): string => {\n  const fullUrl = props.match.params[PAGE_TOC_ID_MATCH]\n  if (!fullUrl) {\n    return ''\n  }\n\n  return stripUrlShortLink(fullUrl)\n}\n\nconst getPageTocId = (cccStore: CCCEnhancedStore, shortUrl: string): string => {\n  return cccStore.extraMeta.urlMap[shortUrl] || ''\n}\n\nconst useStyles = makeStyles({\n  pageContainer: {\n    padding: '0 10px',\n  },\n})\n","import React from 'react'\nimport { findPage } from 'cccMetaGenerator/makeRefRangeTree'\nimport { AppRouteType } from 'components/App'\nimport { getCCCRefKey } from 'components/Page/pageScrollHooks'\n\nexport const CCC_REFERENCE_MATCH = 'CCC_REFERENCE_MATCH'\n\ninterface PageRouteParams {\n  [CCC_REFERENCE_MATCH]: string\n}\n// eslint-disable-next-line @typescript-eslint/no-empty-interface\ninterface CCCReferenceProps extends AppRouteType<PageRouteParams> {}\n\nexport const CCCReference: React.FC<CCCReferenceProps> = props => {\n  const cccReferenceMatch = props.match.params[CCC_REFERENCE_MATCH]\n  if (!cccReferenceMatch || !isNumber(cccReferenceMatch)) {\n    return null\n  }\n\n  const cccReferenceNumber = parseInt(cccReferenceMatch, 10)\n  const { cccStore } = props\n  const matchedPageId = findPage(\n    cccReferenceNumber,\n    cccStore.extraMeta.cccRefRangeTree.root\n  )\n\n  if (!matchedPageId) {\n    return null\n  }\n\n  const targetPageUrl = cccStore.extraMeta.pageMetaMap[matchedPageId].url\n  props.history.replace(\n    `/p/${targetPageUrl}?focus=${getCCCRefKey(cccReferenceNumber)}`\n  )\n\n  return null\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nconst isNumber = (v: any) => !isNaN(v as number)\n","import { getAllTocLinks } from './cccMetaGenerator'\nimport {\n  PageNode,\n  CCCRefElement,\n  TOCLink,\n  PageNodes,\n} from './../store/cccTypedefs'\nexport interface CCCRefRangeTree {\n  root: RangeTreeNode\n}\nexport interface RangeTreeNode {\n  left: RangeTreeNode | undefined\n  right: RangeTreeNode | undefined\n  min: number\n  max: number\n  tocId: string | undefined\n}\n\nexport const makeCCCRefRangeTree = (\n  tocLinkTree: TOCLink[],\n  pageNodes: PageNodes\n): CCCRefRangeTree => {\n  const tocIds = getAllTocLinks(tocLinkTree)\n  const tocIdsWithPages = tocIds.filter(tocId => tocId in pageNodes)\n\n  const rangeNodes: RangeTreeNode[] = tocIdsWithPages\n    .map(tocId => pageNodes[tocId])\n    .map(getRefRangeForPage)\n    .filter(n => !!n) as RangeTreeNode[]\n\n  /* eslint-disable  */\n  let remainingNodes: RangeTreeNode[] = [...rangeNodes]\n  let tempNodes: RangeTreeNode[] = []\n\n  while (remainingNodes.length > 1) {\n    const evenIndexes = remainingNodes.map((_, i) => i).filter(i => i % 2 === 0)\n    evenIndexes.forEach(i => {\n      const currentNode = remainingNodes[i]\n\n      const hasNextElement = !!remainingNodes[i + 1]\n      if (!hasNextElement) {\n        tempNodes.push(currentNode)\n        return\n      }\n\n      const nextNode = remainingNodes[i + 1]\n\n      const newParentNode: RangeTreeNode = {\n        left: currentNode,\n        right: nextNode,\n        min: currentNode.min,\n        max: nextNode.max,\n        tocId: undefined,\n      }\n      tempNodes.push(newParentNode)\n    })\n\n    remainingNodes = [...tempNodes]\n    tempNodes = []\n  }\n\n  /* eslint-enable  */\n  const rootNode = remainingNodes[0]\n  return { root: rootNode }\n}\n\nconst getRefRangeForPage = (pageNode: PageNode): RangeTreeNode | undefined => {\n  const { id, paragraphs } = pageNode\n\n  if (paragraphs.length === 0) {\n    return undefined\n  }\n\n  const paragraphElements = paragraphs\n    .map(p => p.elements)\n    .reduce((acc, curr) => [...acc, ...curr], [])\n  const cccRefNumbers = paragraphElements\n    .filter(e => e.type === 'ref-ccc')\n    .map(e => {\n      return (e as CCCRefElement).ref_number\n    })\n    .filter(n => n)\n\n  if (cccRefNumbers.length === 0) {\n    return undefined\n  }\n\n  return {\n    left: undefined,\n    right: undefined,\n    min: Math.min.apply(null, cccRefNumbers),\n    max: Math.max.apply(null, cccRefNumbers),\n    tocId: id,\n  }\n}\n\nexport const findPage = (\n  cccRefNumber: number,\n  rootRangeNode: RangeTreeNode\n): string | undefined => {\n  /* eslint-disable  */\n  let currentNode: RangeTreeNode = rootRangeNode\n\n  while (true) {\n    const { left, right } = currentNode\n    const isInLeft = !!left ? cccRefNumber <= left.max : false\n    const isInRight = !!right ? cccRefNumber >= right.min : false\n\n    if (isInLeft) {\n      currentNode = left as RangeTreeNode\n    } else if (isInRight) {\n      currentNode = right as RangeTreeNode\n    } else {\n      return undefined\n    }\n\n    if (!!currentNode.tocId) {\n      break\n    }\n  }\n\n  /* eslint-enable  */\n\n  return currentNode.tocId\n}\n","import { PageNodes } from 'store/cccTypedefs'\nimport { CCCEnhancedStore } from 'makeStaticAssets/typedefs'\nimport {\n  PageNode,\n  PageParagraph,\n  PageParagraphElementType,\n  PageParagraphElement,\n  TextElement,\n  RefElement,\n  CCCRefElement,\n  PageFootnotes,\n} from '../../store/cccTypedefs'\n\nexport interface CCCPageSnapshot {\n  id: string\n  title: string\n  content: string\n}\n\nexport const createPageSnapshot = (\n  tocId: string,\n  cccStore: CCCEnhancedStore,\n  pageNodes: PageNodes\n): CCCPageSnapshot => {\n  const { store } = cccStore\n  const { toc_nodes } = store\n\n  const { text: pageTitle } = toc_nodes[tocId]\n  const pageContent = extractTextFromPage(pageNodes[tocId])\n\n  return { title: pageTitle, content: pageContent, id: tocId }\n}\n\nexport const extractTextFromPage = (page: PageNode) => {\n  const { paragraphs, footnotes } = page\n\n  const paragraphText = extractTextFromPageParagraphs(paragraphs)\n  const footnotesText = extractTextFromPageFootnotes(footnotes)\n  return `${paragraphText}${footnotesText}`\n}\n\nexport const extractTextFromPageParagraphs = (\n  pageParagraphs: PageParagraph[]\n) => {\n  const texts = pageParagraphs\n    .map(paragraph => {\n      return paragraph.elements\n        .map(element => {\n          const mapper = PARAGRAPH_ELEMENT_TEXT_MAPPER[element.type]\n          return mapper(element)\n        })\n        .join('')\n    })\n    .join('\\n\\n')\n\n  return texts\n}\n\nexport const extractTextFromPageFootnotes = (pageFootnotes: PageFootnotes) => {\n  const texts = Object.values(pageFootnotes).map(footnote => {\n    const { number, refs } = footnote\n\n    const footnoteText = refs\n      .reduce<string[]>((acc, curr) => [...acc, curr.text], [])\n      .join(', ')\n\n    return `${number}: ${footnoteText}`\n  })\n\n  return texts.join('\\n')\n}\n\nconst PARAGRAPH_ELEMENT_TEXT_MAPPER: Record<\n  PageParagraphElementType,\n  (element: PageParagraphElement) => string\n> = {\n  text: e => {\n    const elm = e as TextElement\n    return `${elm.text}`\n  },\n  ref: e => {\n    const elm = e as RefElement\n    return `${elm.number}`\n  },\n  'ref-anchor': () => '',\n  'ref-ccc': e => {\n    const elm = e as CCCRefElement\n    return `${elm.ref_number} `\n  },\n  spacer: () => '\\n',\n}\n","import request from 'request-promise-native'\nimport { PageNodes, PageNode } from './../../store/cccTypedefs'\nimport { CCCEnhancedStore } from 'makeStaticAssets/typedefs'\nimport { PUBLIC_FOLDER_URL } from 'components/common/config'\n\nexport const createPageNodesFromRemote = async (\n  cccStore: CCCEnhancedStore\n): Promise<PageNodes> => {\n  const { urlMap, pageMetaMap } = cccStore.extraMeta\n\n  const reverseUrlMap: Record<string, string> = Object.keys(urlMap).reduce(\n    (acc, shortUrl) => {\n      const tocId = urlMap[shortUrl]\n      return { ...acc, [tocId]: shortUrl }\n    },\n    {}\n  )\n\n  const shortUrls = Object.keys(pageMetaMap).map(k => reverseUrlMap[k])\n  const pageNodesRaw: PageNode[] = await Promise.all(\n    shortUrls.map(loadPageContent)\n  )\n\n  return pageNodesRaw.reduce((acc, curr) => ({ ...acc, [curr.id]: curr }), {})\n}\n\nconst loadPageContent = async (shortUrl: string) => {\n  return request({\n    uri: `${PUBLIC_FOLDER_URL}/ccc/pages/${shortUrl}.json`,\n    method: 'GET',\n    json: true,\n  })\n}\n","import { PageNodes } from './../../store/cccTypedefs'\nimport { createPageSnapshot, CCCPageSnapshot } from './createSearchIndexHelpers'\nimport { CCCEnhancedStore } from 'makeStaticAssets/typedefs'\nimport lunr from 'lunr'\nimport { createPageNodesFromRemote } from './createPageNodes'\n\nexport interface CCCSearchIndexes {\n  titleIndex: lunr.Index\n  contentIndex: lunr.Index\n  cccSnapshot: ConciseCCCSnapshot\n  searchByTitle: (term: string) => SearchEntry[]\n  searchByContent: (term: string) => SearchEntry[]\n  ready: boolean\n}\n\nexport const createSearchIndexes = async (\n  cccStore: CCCEnhancedStore\n): Promise<CCCSearchIndexes> => {\n  const pageNodes = await createPageNodesFromRemote(cccStore)\n\n  const cccSnapshot = makeConciseCCCSnapshot(cccStore, pageNodes)\n  const pageSnapshots = Object.values(cccSnapshot)\n\n  /* eslint-disable fp/no-this */\n  const titleIndex = lunr(function() {\n    this.ref('id')\n    this.field('title')\n\n    pageSnapshots.forEach(entry => {\n      const { content, ...rest } = entry\n      this.add(rest)\n    })\n  })\n\n  const contentIndex = lunr(function() {\n    this.ref('id')\n    this.field('content')\n\n    pageSnapshots.forEach(entry => {\n      const { title, ...rest } = entry\n      this.add(rest)\n    })\n  })\n  /* eslint-enable fp/no-this */\n\n  const searchByTitle = createSearchHandler(titleIndex, cccSnapshot)\n  const searchByContent = createSearchHandler(contentIndex, cccSnapshot)\n\n  return {\n    titleIndex,\n    contentIndex,\n    cccSnapshot,\n    searchByTitle,\n    searchByContent,\n    ready: true,\n  }\n}\n\nexport type SearchEntry = CCCPageSnapshot & lunr.Index.Result\n\nconst createSearchHandler = (\n  index: lunr.Index,\n  cccSnapshot: ConciseCCCSnapshot\n) => (term: string): SearchEntry[] => {\n  return index.search(term).map(searchResult => ({\n    ...searchResult,\n    ...cccSnapshot[searchResult.ref],\n  }))\n}\n\ninterface ConciseCCCSnapshot {\n  [tocId: string]: CCCPageSnapshot\n}\n\nexport const makeConciseCCCSnapshot = (\n  cccStore: CCCEnhancedStore,\n  pageNodes: PageNodes\n): ConciseCCCSnapshot => {\n  const tocKeys = Object.keys(cccStore.extraMeta.pageMetaMap)\n  return tocKeys.reduce(\n    (acc, tocId) => ({\n      ...acc,\n      [tocId]: createPageSnapshot(tocId, cccStore, pageNodes),\n    }),\n    {}\n  )\n}\n\nexport const createEmptyIndexes = (): CCCSearchIndexes => {\n  return {\n    titleIndex: createEmptyLunrIndex(),\n    contentIndex: createEmptyLunrIndex(),\n    cccSnapshot: {},\n    searchByTitle: () => [],\n    searchByContent: () => [],\n    ready: false,\n  }\n}\n\nconst createEmptyLunrIndex = () => lunr(function() {})\n","import React from 'react'\nimport { RouteComponentProps } from 'react-router'\nimport { APP_ROUTES } from 'components/App'\n\nexport const Home: React.FC<RouteComponentProps> = props => {\n  props.history.replace(APP_ROUTES.INDEX)\n  return null\n}\n","module.exports = __webpack_public_path__ + \"static/media/github.07883e93.svg\";","import { useEffect, useState } from 'react'\nimport request from 'request-promise-native'\nimport { PUBLIC_FOLDER_URL } from 'components/common/config'\nimport { LeanPageNode } from './../../makeStaticAssets/typedefs'\n\nexport const useLoadPageContentHook = (shortUrl: string) => {\n  const [lastShortUrl, setShortUrl] = useState('')\n  const [pageNode, setPageNode] = useState<LeanPageNode | undefined>(undefined)\n\n  useEffect(() => {\n    if (urlHasChanged(lastShortUrl, shortUrl)) {\n      setShortUrl(shortUrl)\n      setPageNode(undefined)\n      setImmediate(() => loadPageContent(shortUrl, data => setPageNode(data)))\n    }\n  }, [shortUrl, pageNode, lastShortUrl])\n\n  return {\n    isLoading: !pageNode,\n    pageNode,\n  }\n}\n\nconst urlHasChanged = (url1: string, url2: string) => url1 !== url2\n\nconst loadPageContent = async (\n  shortUrl: string,\n  onDataLoad: (data: LeanPageNode) => void\n) => {\n  const data: LeanPageNode = await request({\n    uri: `${PUBLIC_FOLDER_URL}/ccc/pages/${shortUrl}.json`,\n    method: 'GET',\n    json: true,\n  })\n  onDataLoad(data)\n}\n","import React from 'react'\nimport { Link } from 'react-router-dom'\nimport { TOCNodes } from 'store/cccTypedefs'\nimport { PageMetaMap } from 'cccMetaGenerator/makePageMetaMap'\nimport { Layout } from '../Layout/Layout'\nimport { makeStyles } from '@material-ui/core'\nimport { AppRouteType } from 'components/App'\nimport { useScrollToTopOnPathChange } from 'components/common/hooks/useScrollToTopOnRouteChange'\nimport { LeanTOCLink } from 'makeStaticAssets/typedefs'\n\nconst useStyles = makeStyles({\n  container: {\n    // unexplained gap between toolbar and this page's outermost div\n    marginTop: -20,\n    padding: '20px 0',\n  },\n  ul: {\n    paddingLeft: 20,\n    lineHeight: 1.5,\n    '& ul': {\n      paddingLeft: 20,\n    },\n    '& li:last-child': {\n      marginBottom: 10,\n    },\n  },\n})\n\n// eslint-disable-next-line @typescript-eslint/no-empty-interface\ninterface IndexProps extends AppRouteType {}\n\nexport const Index: React.FC<IndexProps> = props => {\n  const { cccStore } = props\n  const styles = useStyles()\n  useScrollToTopOnPathChange('')\n\n  const { store, extraMeta } = cccStore\n  const { toc_link_tree, toc_nodes } = store\n  const { pageMetaMap } = extraMeta\n\n  return (\n    <Layout routeHistory={props.history}>\n      <div className={styles.container}>\n        {renderIndex(toc_link_tree, toc_nodes, pageMetaMap, styles)}\n      </div>\n    </Layout>\n  )\n}\n\nconst renderIndex = (\n  tocTree: LeanTOCLink[],\n  tocNodes: TOCNodes,\n  pageMetaMap: PageMetaMap,\n  styles: Record<string, string>\n) => {\n  return (\n    <ul className={styles.ul}>\n      {tocTree.map(renderIndexNode(tocNodes, pageMetaMap))}\n    </ul>\n  )\n}\n\nconst renderIndexNode = (\n  tocNodes: TOCNodes,\n  pageMetaMap: PageMetaMap\n  // eslint-disable-next-line react/display-name\n) => (tocLink: LeanTOCLink, index: number) => {\n  const { children = [], id } = tocLink\n  const { text, link } = tocNodes[id]\n\n  const renderedChildren =\n    children.length > 0 ? (\n      <ul>{children.map(renderIndexNode(tocNodes, pageMetaMap))}</ul>\n    ) : (\n      <></>\n    )\n  const renderedText = link ? (\n    <Link to={`/p/${pageMetaMap[id].url}`}>{text}</Link>\n  ) : (\n    text\n  )\n\n  return (\n    <li key={index}>\n      {renderedText}\n      {renderedChildren}\n    </li>\n  )\n}\n","import React, { useState, useEffect } from 'react'\nimport { AppRouteType } from 'components/App'\nimport { Layout, makeDocumentTitle } from 'components/Layout/Layout'\nimport { TextField, IconButton } from '@material-ui/core'\nimport { Search as SearchIcon } from '@material-ui/icons'\nimport { useSearchIndexHook } from './useSearchIndexHook'\nimport { CCCSearchIndexes, SearchEntry } from './createSearchIndex'\nimport { SearchResults } from './SearchResults'\n\n// eslint-disable-next-line @typescript-eslint/no-empty-interface\ninterface SearchProps extends AppRouteType {}\n\nexport const Search: React.FC<SearchProps> = props => {\n  const { cccStore } = props\n  const { searchIndex } = useSearchIndexHook(cccStore)\n\n  const [searchTerm, setSearchTerm] = useState('')\n  const [doSearch, setDoSearch] = useState(false)\n  const [searchResult, setSearchResult] = useState(emptySearchResult)\n\n  useEffect(() => {\n    if (!doSearch) {\n      return\n    }\n\n    const doSearchOperation = async () => {\n      const searchMatches = getMatchingPages(searchIndex, searchTerm)\n      setSearchResult(searchMatches)\n      setDoSearch(false)\n    }\n    setImmediate(doSearchOperation)\n  }, [doSearch, searchIndex, searchTerm, cccStore])\n\n  return (\n    <Layout\n      routeHistory={props.history}\n      documentTitle={makeDocumentTitle('Search')}\n    >\n      <div>\n        <TextField\n          label='Search Term'\n          value={searchTerm}\n          disabled={doSearch}\n          autoFocus={true}\n          onChange={evt => setSearchTerm(evt.target.value)}\n        />\n        <IconButton onClick={() => setDoSearch(true)} disabled={doSearch}>\n          <SearchIcon />\n        </IconButton>\n      </div>\n      <div>\n        <SearchResults searchResult={searchResult} searchTerm={searchTerm} />\n      </div>\n    </Layout>\n  )\n}\n\nexport interface SearchResult {\n  byTitle: SearchEntry[]\n  byContent: SearchEntry[]\n}\n\nconst getMatchingPages = (\n  searchIndex: CCCSearchIndexes,\n  term: string\n): SearchResult => {\n  const { ready, searchByTitle, searchByContent } = searchIndex\n  if (!ready) {\n    return emptySearchResult\n  }\n\n  const indexSearchTerm = `${term}*`\n  const titleMatches = searchByTitle(indexSearchTerm)\n  const contentMatches = searchByContent(indexSearchTerm)\n  return { byTitle: titleMatches, byContent: contentMatches }\n}\n\nconst emptySearchResult: SearchResult = { byTitle: [], byContent: [] }\n","import {\n  createSearchIndexes,\n  CCCSearchIndexes,\n  createEmptyIndexes,\n} from './createSearchIndex'\nimport { CCCEnhancedStore } from 'makeStaticAssets/typedefs'\nimport { useState, useEffect } from 'react'\nimport { once } from 'ramda'\n\nexport const useSearchIndexHook = (cccStore: CCCEnhancedStore) => {\n  const [searchIndex, setSearchIndex] = useState<CCCSearchIndexes>(\n    createEmptyIndexes()\n  )\n  const [hasLoaded, setHasLoaded] = useState(false)\n\n  useEffect(() => {\n    if (hasLoaded) {\n      return\n    }\n\n    const loadSearchIndex = async () => {\n      const newIndex = await createSearchIndex(cccStore)\n      setSearchIndex(newIndex)\n      setHasLoaded(true)\n    }\n    // to make this non-blocking to UI thread\n    setImmediate(loadSearchIndex)\n  }, [cccStore, hasLoaded])\n\n  return {\n    searchIndex,\n  }\n}\n\nconst createSearchIndex: (\n  cccStore: CCCEnhancedStore\n) => Promise<CCCSearchIndexes> = once((cccStore: CCCEnhancedStore) =>\n  createSearchIndexes(cccStore)\n)\n","export const FLAG_ENABLE_SEARCH_PAGE =\n  process.env.REACT_APP_FLAG_ENABLE_SEARCH_PAGE === 'true'\n","import React from 'react'\nimport { SearchEntry } from './createSearchIndex'\nimport { Grid, Paper } from '@material-ui/core'\nimport { makeStyles } from '@material-ui/styles'\n\ninterface SearchResultCardProps {\n  entry: SearchEntry\n}\n\nexport const SearchResultCard: React.FC<SearchResultCardProps> = props => {\n  const { entry } = props\n  const { title } = entry\n\n  const styles = useStyles()\n\n  return (\n    <Grid item xs={12} sm={6} md={4}>\n      <Paper className={styles.paper}>{title}</Paper>\n    </Grid>\n  )\n}\n\nconst useStyles = makeStyles({ paper: { height: '5em', padding: 20 } })\n","import React from 'react'\nimport { SearchResult } from './Search'\nimport { makeStyles } from '@material-ui/styles'\nimport { Grid } from '@material-ui/core'\nimport { SearchResultCard } from './SearchResultCard'\n\ninterface SearchResultsProps {\n  searchResult: SearchResult\n  searchTerm: string\n}\n\nexport const SearchResults: React.FC<SearchResultsProps> = props => {\n  const styles = useStyles()\n  const { searchResult, searchTerm } = props\n\n  const withWrapperContainer = (element: JSX.Element) => (\n    <div className={styles.searchResultsWrapper}>\n      <div className={styles.searchResultsLabel}>Search Results</div>\n      {element}\n    </div>\n  )\n\n  if (isEmptySearchTerm(searchTerm)) {\n    return withWrapperContainer(\n      <div className={styles.labelDiv}>No Search Term</div>\n    )\n  }\n\n  if (hasNoMatchingResults(searchResult)) {\n    return withWrapperContainer(\n      <div className={styles.labelDiv}>No Matching Results</div>\n    )\n  }\n\n  const { byTitle, byContent } = searchResult\n  const combinedEntries = [...byTitle, ...byContent]\n  return withWrapperContainer(\n    <Grid container spacing={3}>\n      {combinedEntries.map((entry, index) => (\n        <SearchResultCard entry={entry} key={index} />\n      ))}\n    </Grid>\n  )\n}\n\nconst isEmptySearchTerm = (term: string): boolean => term === ''\n\nconst hasNoMatchingResults = (result: SearchResult): boolean => {\n  const { byTitle, byContent } = result\n  const totalResults = byTitle.length + byContent.length\n\n  return totalResults === 0\n}\n\nconst useStyles = makeStyles({\n  searchResultsWrapper: {\n    paddingTop: '1em',\n    paddingBottom: '1em',\n    minHeight: 200,\n  },\n  searchResultsLabel: {\n    fontWeight: 'bold',\n    color: 'gray',\n    marginBottom: '0.5em',\n  },\n  labelDiv: { height: '100%', color: 'gray' },\n})\n","export const PUBLIC_FOLDER_URL =\n  process.env.NODE_ENV === 'production'\n    ? 'https://nossbigg.github.io/catechism'\n    : window.location.origin\n","import React from 'react'\nimport { makeStyles } from '@material-ui/styles'\nimport { Container } from '@material-ui/core'\nimport GITHUB_ICON from './github.svg'\n\nexport const Footer: React.FC = () => {\n  const styles = useStyles()\n\n  return (\n    <div className={styles.footerContainer}>\n      <Container maxWidth='md'>\n        <b>Catechism of the Catholic Church</b>\n        <br />\n        <span>Â© Libreria Editrice Vaticana</span>\n        <br />\n        <span>Â© St. Charles Borromeo Catholic Church</span>\n        <br />\n        <span>\n          Made in Love by Shine Ministry;\n          <a href='https://www.shineministry.xyz'>\n            <img src={GITHUB_ICON} height='10' alt='github icon' />\n          </a>\n        </span>\n      </Container>\n    </div>\n  )\n}\n\nconst useStyles = makeStyles({\n  footerContainer: {\n    fontSize: '0.75em',\n    backgroundColor: '#f7f0d8',\n    padding: '2em 0',\n  },\n})\n","import React from 'react'\nimport {\n  AppBar,\n  Toolbar,\n  useScrollTrigger,\n  Slide,\n  Container,\n  makeStyles,\n} from '@material-ui/core'\nimport { Link } from 'react-router-dom'\nimport { APP_ROUTES } from 'components/App'\nimport { Footer } from 'components/Footer/Footer'\nimport * as H from 'history'\nimport { DocumentTitle } from 'components/common/DocumentTitle'\nimport { LoadingPlaceholder } from 'components/LoadingPlaceholder/LoadingPlaceholder'\n\nconst useStyles = makeStyles({\n  backgroundStyle: { backgroundColor: 'white' },\n  loadingPlaceholderContainer: {\n    height: '100vh',\n    display: 'flex',\n    justifyContent: 'center',\n  },\n  appBar: {\n    fontFamily: 'Cinzel',\n    display: 'flex',\n    alignItems: 'center',\n    fontSize: '1.4em',\n  },\n  catechismAppBarText: {\n    color: 'black',\n    textDecoration: 'none',\n  },\n})\n\ntype MUIContainerWidth = 'xs' | 'sm' | 'md' | 'lg' | 'xl' | false\n\ninterface LayoutProps {\n  documentTitle?: string\n  routeHistory: H.History\n  showLoading?: boolean\n  toolbarContainerWidth?: MUIContainerWidth\n  mainContainerWidth?: MUIContainerWidth\n}\n\nexport const Layout: React.FC<LayoutProps> = props => {\n  const styles = useStyles()\n  const {\n    mainContainerWidth,\n    toolbarContainerWidth,\n    showLoading = false,\n    documentTitle = DEFAULT_WEBSITE_TITLE,\n  } = props\n\n  return (\n    <div>\n      <DocumentTitle title={documentTitle} />\n      <HideOnScroll>\n        <AppBar color='default' style={{ boxShadow: 'none' }}>\n          <Toolbar>\n            <Container\n              maxWidth={toolbarContainerWidth || DEFAULT_TOOLBAR_WIDTH}\n              className={styles.appBar}\n            >\n              <Link\n                className={styles.catechismAppBarText}\n                to={APP_ROUTES.INDEX}\n              >\n                Catechism\n              </Link>\n            </Container>\n          </Toolbar>\n        </AppBar>\n      </HideOnScroll>\n      <DummyToolbar />\n      <div className={styles.backgroundStyle}>\n        <Container\n          maxWidth={mainContainerWidth || DEFAULT_MAIN_CONTAINER_WIDTH}\n        >\n          {showLoading ? (\n            <div className={styles.loadingPlaceholderContainer}>\n              <LoadingPlaceholder />\n            </div>\n          ) : (\n            props.children\n          )}\n        </Container>\n      </div>\n      <Footer />\n    </div>\n  )\n}\n\nconst HideOnScroll: React.FC = props => {\n  const trigger = useScrollTrigger()\n\n  return (\n    <Slide appear={false} direction='down' in={!trigger}>\n      {props.children}\n    </Slide>\n  )\n}\n\nconst DummyToolbar: React.FC = () => {\n  const styles = useStyles()\n  return (\n    <div className={styles.backgroundStyle}>\n      <Toolbar />\n    </div>\n  )\n}\n\nconst DEFAULT_MAIN_CONTAINER_WIDTH = 'md'\nconst DEFAULT_TOOLBAR_WIDTH = 'md'\nconst DEFAULT_WEBSITE_TITLE = 'Catechism of the Catholic Church'\n\nexport const makeDocumentTitle = (suffix: string) => `Catechism | ${suffix}`\n","import React, { useEffect, useState } from 'react'\nimport { HashRouter, Route, RouteComponentProps } from 'react-router-dom'\nimport { Home } from './Home/Home'\nimport { PAGE_TOC_ID_MATCH, Page } from './Page/Page'\nimport { Index } from './Index/Index'\nimport { CCC_REFERENCE_MATCH, CCCReference } from './CCCReference/CCCReference'\nimport { CCCEnhancedStore } from 'makeStaticAssets/typedefs'\nimport { Search } from './Search/Search'\nimport request from 'request-promise-native'\nimport { FLAG_ENABLE_SEARCH_PAGE } from 'components/common/featureFlags'\nimport { PUBLIC_FOLDER_URL } from 'components/common/config'\nimport { LoadingPlaceholderMaximized } from './LoadingPlaceholder/LoadingPlaceholder'\n\ntype AppRouteKeys = 'HOME' | 'PAGE' | 'INDEX' | 'CCC_REFERENCE' | 'SEARCH'\ntype AppRoutes = Record<AppRouteKeys, string>\n\nexport const APP_ROUTES: AppRoutes = {\n  HOME: '/',\n  PAGE: `/p/:${PAGE_TOC_ID_MATCH}`,\n  INDEX: '/index',\n  CCC_REFERENCE: `/r/:${CCC_REFERENCE_MATCH}`,\n  SEARCH: `/s`,\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport interface AppRouteType<TRouteParams = any>\n  extends RouteComponentProps<TRouteParams> {\n  cccStore: CCCEnhancedStore\n}\n\nexport const App: React.FC = () => {\n  const { isLoaded, store: cccStore } = useCCCStoreHook()\n  const withStore = withStoreEnhancer(cccStore as CCCEnhancedStore)\n\n  if (!isLoaded) {\n    return <LoadingPlaceholderMaximized showImmediately={true} />\n  }\n\n  return (\n    <HashRouter>\n      <Route path={APP_ROUTES.HOME} exact component={withStore(Home)}></Route>\n      <Route path={APP_ROUTES.INDEX} component={withStore(Index)}></Route>\n      <Route path={APP_ROUTES.PAGE} component={withStore(Page)}></Route>\n      {FLAG_ENABLE_SEARCH_PAGE && (\n        <Route path={APP_ROUTES.SEARCH} component={withStore(Search)}></Route>\n      )}\n      <Route\n        path={APP_ROUTES.CCC_REFERENCE}\n        component={withStore(CCCReference)}\n      ></Route>\n    </HashRouter>\n  )\n}\n\nconst withStoreEnhancer = (store: CCCEnhancedStore) => (\n  Component: React.FC<AppRouteType>\n) =>\n  function withStoreEnhancer(props: RouteComponentProps) {\n    return <Component {...props} cccStore={store} />\n  }\n\nconst useCCCStoreHook = () => {\n  const [store, setStore] = useState<CCCEnhancedStore | undefined>(undefined)\n\n  useEffect(() => {\n    if (!store) {\n      setImmediate(() => loadRemoteStores(setStore))\n    }\n  }, [store])\n\n  return { store, isLoaded: !!store }\n}\n\nconst loadRemoteStores = async (\n  setStore: (store: CCCEnhancedStore) => void\n) => {\n  const cccRequest = () =>\n    request({\n      uri: `${PUBLIC_FOLDER_URL}/ccc/ccc.json`,\n      method: 'GET',\n      json: true,\n    })\n  const cccMetaRequest = () =>\n    request({\n      uri: `${PUBLIC_FOLDER_URL}/ccc/cccMeta.json`,\n      method: 'GET',\n      json: true,\n    })\n\n  const [ccc, cccMeta] = await Promise.all([cccRequest(), cccMetaRequest()])\n  setStore({ store: ccc, extraMeta: cccMeta })\n}\n","/* eslint-disable fp/no-mutation */\n\n// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n)\n\ninterface Config {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void\n  onUpdate?: (registration: ServiceWorkerRegistration) => void\n}\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      (process as { env: { [key: string]: string } }).env.PUBLIC_URL,\n      window.location.href\n    )\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config)\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          // eslint-disable-next-line no-console\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          )\n        })\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config)\n      }\n    })\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing\n        if (installingWorker == null) {\n          return\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              // eslint-disable-next-line no-console\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              )\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration)\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              // eslint-disable-next-line no-console\n              console.log('Content is cached for offline use.')\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration)\n              }\n            }\n          }\n        }\n      }\n    })\n    .catch(error => {\n      // eslint-disable-next-line no-console\n      console.error('Error during service worker registration:', error)\n    })\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type')\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload()\n          })\n        })\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config)\n      }\n    })\n    .catch(() => {\n      // eslint-disable-next-line no-console\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      )\n    })\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister()\n    })\n  }\n}\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport './index.css'\nimport * as serviceWorker from './serviceWorker'\nimport { App } from './components/App'\n\nReactDOM.render(<App />, document.getElementById('root'))\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.register()\n","import {\n  LeanPageNode,\n  LeanPageParagraph,\n} from './../../makeStaticAssets/typedefs'\nimport { CCCRefElement } from '../../store/cccTypedefs'\nimport { createRef, useState, useEffect, useCallback } from 'react'\nimport queryString from 'query-string'\n\nexport interface RefsMap {\n  [index: string]: WrapperRefMeta\n}\n\nexport interface WrapperRefMeta {\n  ref: React.RefObject<HTMLDivElement>\n  highlighted: boolean\n}\n\nexport const usePageScrollHooks = (\n  page: LeanPageNode | undefined,\n  locationSearch: string\n): RefsMap => {\n  const pageFilled = page || { id: '', paragraphs: [], footnotes: {} }\n  const { paragraphs, footnotes } = pageFilled\n\n  const paragraphKeys = paragraphs.map((_, index) => getParagraphRefKey(index))\n  const footnoteKeys = Object.keys(footnotes).map(getFootnoteRefKey)\n  const cccRefToParagraphMapper = createCCCRefToParagraphMapper(paragraphs)\n\n  const [shouldUpdate, setShouldUpdate] = useState(false)\n  const [lastFocusedElement, setLastFocusedElement] = useState('')\n  const [focusedElement, setFocusedElement] = useState('')\n\n  const makeUpdatedElementRefs = useCallback(\n    () =>\n      makeItemRefs(\n        [...paragraphKeys, ...footnoteKeys],\n        focusedElement,\n        cccRefToParagraphMapper\n      ),\n    [paragraphKeys, footnoteKeys, cccRefToParagraphMapper, focusedElement]\n  )\n\n  const [elementRefs, setElementRefs] = useState(makeUpdatedElementRefs())\n\n  useEffect(() => {\n    if (shouldUpdate) {\n      return\n    }\n\n    const newFocusedElement = getCurrentFocusedElement(locationSearch)\n    if (lastFocusedElement !== newFocusedElement) {\n      setShouldUpdate(true)\n      setFocusedElement(newFocusedElement)\n    }\n  }, [shouldUpdate, locationSearch, lastFocusedElement, setShouldUpdate])\n\n  useEffect(() => {\n    if (!shouldUpdate) {\n      return\n    }\n    setShouldUpdate(false)\n    setLastFocusedElement(focusedElement)\n\n    const resolvedElementKey = resolveFocusedElementKey(\n      cccRefToParagraphMapper,\n      focusedElement\n    )\n    const focusedElementMeta = elementRefs[resolvedElementKey]\n    if (!focusedElementMeta) {\n      setFocusedElement('')\n      return\n    }\n\n    setElementRefs(makeUpdatedElementRefs())\n    scrollToElement(focusedElementMeta)\n\n    setImmediate(() => {\n      setElementRefs(makeResettedElementRefs(elementRefs, resolvedElementKey))\n      setFocusedElement('')\n    })\n  }, [\n    makeUpdatedElementRefs,\n    cccRefToParagraphMapper,\n    elementRefs,\n    focusedElement,\n    shouldUpdate,\n    footnoteKeys,\n    paragraphKeys,\n  ])\n\n  return elementRefs\n}\n\nconst makeItemRefs = (\n  keys: string[],\n  focusedElementKey: string,\n  cccRefToParagraphMapper: CCCRefToParagraphMapper\n): RefsMap => {\n  const resolvedKey = resolveFocusedElementKey(\n    cccRefToParagraphMapper,\n    focusedElementKey\n  )\n  return keys.reduce(\n    (acc, currentKey) => ({\n      ...acc,\n      [currentKey]: {\n        ref: createRef(),\n        highlighted: currentKey === resolvedKey,\n      },\n    }),\n    {}\n  )\n}\n\nconst makeResettedElementRefs = (\n  elementRefs: RefsMap,\n  keyToReset: string\n): RefsMap => {\n  const updatedElementRef: WrapperRefMeta = {\n    ...elementRefs[keyToReset],\n    highlighted: false,\n  }\n  return { ...elementRefs, [keyToReset]: updatedElementRef }\n}\n\ninterface CCCRefToParagraphMapper {\n  [cccRef: string]: string\n}\n\nconst createCCCRefToParagraphMapper = (\n  paragraphs: LeanPageParagraph[]\n): CCCRefToParagraphMapper =>\n  paragraphs.reduce((acc, curr, index) => {\n    const cccRefs = curr.elements.filter(e => e.type === 'ref-ccc')\n    if (cccRefs.length === 0) {\n      return acc\n    }\n\n    const cccRef = cccRefs[0] as CCCRefElement\n    return {\n      ...acc,\n      [getCCCRefKey(cccRef.ref_number)]: getParagraphRefKey(index),\n    }\n  }, {})\n\nexport const getParagraphRefKey = (index: number) => `paragraph-${index + 1}`\n\nexport const getFootnoteRefKey = (footnoteNumber: string) =>\n  `footnote-${footnoteNumber}`\n\nexport const getCCCRefKey = (refNumber: number) => `ccc-${refNumber}`\n\nconst resolveFocusedElementKey = (\n  cccRefToParagraphMapper: CCCRefToParagraphMapper,\n  currentFocusedElement: string\n): string => {\n  return currentFocusedElement in cccRefToParagraphMapper\n    ? cccRefToParagraphMapper[currentFocusedElement]\n    : currentFocusedElement\n}\n\nconst getCurrentFocusedElement = (locationSearch: string): string => {\n  const params = queryString.parse(locationSearch)\n\n  const focusedElement = (params['focus'] as string) || ''\n  return focusedElement\n}\n\nconst scrollToElement = (elementMeta: WrapperRefMeta) => {\n  const current = elementMeta.ref.current as HTMLDivElement\n  window.scrollTo(0, current.offsetTop - SCROLL_TO_ELEMENT_OFFSET)\n}\n\nconst SCROLL_TO_ELEMENT_OFFSET = 100\n"],"sourceRoot":""}